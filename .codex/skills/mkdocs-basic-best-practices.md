---
name: mkdocs-basic-best-practices
description: MkDocs（特にMaterial for MkDocs想定）のサイトを長期運用できる形で設計・実装するための基本ベストプラクティスを提示する。情報設計（IA）、ナビ/URL、Markdown作法、設定（mkdocs.yml）、プラグイン、ビルド/デプロイ、パフォーマンス、アクセシビリティ、保守運用（lint/CI）までをチェックリスト化する。特定クラウドのホスティング構築やCMS/DB実装は対象外。
---

# Skill: MkDocs 基本ベストプラクティス（長期運用のための設計・実装）

## 目的
MkDocs を「書き続けても壊れない」構造で立ち上げ、運用・拡張・移植がしやすい状態にする。

このスキルが出す成果物（例）
- 情報設計（IA）方針：セクション分割、ナビ構造、URL規約
- `mkdocs.yml` の推奨テンプレ（最小〜標準）
- Markdown作法（見出し、リンク、画像、表、脚注、注意枠）
- プラグイン導入指針（採用/非採用の判断）
- 運用チェックリスト（レビュー、CI、リンク切れ、リリース手順）

---

## 使うとき（トリガー）
- 「MkDocsでサイトを作る/作り直す」「構成が肥大化してきた」
- 「ナビやURLがぐちゃぐちゃ」「検索で引けない」
- 「運用が属人化」「更新時に壊れやすい」
- 「Material for MkDocsを使っている/使う予定」

## 使わないとき（非スコープ）
- 会社全体のブランド/デザインシステム策定（別）
- CMS/DB連携を前提にした動的サイト化（別）
- 特定のクラウド/サーバ運用の手順書（必要なら別途）

---

## 事前にユーザーから得たい入力（不足していても進める）
- 目的（辞書/手順書/ブログ/カタログ等）と想定読者
- 現状の `mkdocs.yml`、ディレクトリ構造、困りごと
- 既存のURL（外部から参照されているか）
- 公開環境（GitHub Pages等）とCI有無

不足している場合は「辞書/ドキュメント型」を前提に保守的に設計する。

---

# 1. 情報設計（IA）: 最初に決めるべきこと

## 1-1. “サイトの役割” を1文で固定
- 例：  
  - 「18xxタイトルのルール要点を日本語で引ける辞書」  
  - 「手順を正確に再現する運用ドキュメント」  
  - 「カードで探索できるカタログ」

役割が混ざる場合は “入口を分ける”（例：Docs / Blog / Catalog）。

## 1-2. セクション設計（粒度）
推奨：3階層以内（Top → Section → Page）
- 深い階層は検索とパンくずに頼る。ナビで追わせない。

## 1-3. “一覧→詳細” の基本
- 一覧ページ：要点だけ（比較しやすさ優先）
- 詳細ページ：例外/背景/補足
- 外部リンク：詳細ページに集約（一覧に乱立させない）

---

# 2. URL・ファイル命名規約（後から直すと地獄）

## 2-1. スラッグ（URL）を先に固定
- 小文字、ハイフン区切り（`/game/18chesapeake/`）
- 日本語スラッグは避ける（移植・共有・差分が扱いにくい）
- 可能なら “カテゴリをURLに出す”  
  - `/games/` `/glossary/` `/howto/`

## 2-2. ファイルとURLの対応
- `docs/games/18chesapeake/index.md` → `/games/18chesapeake/`
- ページを後で分割しやすいので “index.md 方式” を推奨

---

# 3. Markdown作法（読みやすさと差分のため）

## 3-1. 見出し
- `#` はページタイトルだけ
- `##` から本文開始
- 見出しは短く、同じ粒度を揃える

## 3-2. リンク
- 可能なら相対リンク（リポジトリ内で完結）
- 参照が多い外部サイトは「参考」セクションにまとめる
- アンカーに依存しすぎない（見出し変更に弱い）

## 3-3. 画像
- 置き場を固定：`docs/assets/...` 等
- 命名：`topic-purpose-variant.png`（例：`18xx-token-example.png`）
- 画像に頼りすぎない（検索に乗らない）

## 3-4. 表
- 列数は少なく、説明を詰めすぎない
- 長文セルは避ける（モバイルで崩れる）

---

# 4. mkdocs.yml の基本方針（安全運用）

## 4-1. “増やす前提” の構成にする
- 最初から `site_name`, `site_url`, `repo_url` を埋める（移植しやすい）
- `nav:` はセクション単位で整理（ファイル直列の巨大navを避ける）

## 4-2. ナビは “作りすぎない”
- ナビに全部入れない（検索・タグ・一覧に任せる）
- 重要ページだけ固定ナビ、残りは一覧ページから導線

## 4-3. 多言語があり得るなら早めに分離
- `/ja/` `/en/` を見据えたディレクトリ設計
- 翻訳は “同一ページ内タブ” で済ませるか、ページ分割するかを先に決める

---

# 5. プラグイン/拡張の採用基準（増やしすぎない）

## 5-1. 採用の原則
- “書く人” と “読む人” の両方に利益があるものだけ
- 依存が増えると壊れやすい：最小→必要になったら追加

## 5-2. よくある採用候補（判断の観点）
- 検索：標準で十分なことが多い。大量データや多言語で再検討
- 画像の最適化：サイトが重いなら検討
- リンク切れチェック：運用フェーズで価値が高い
- SEO/メタ：公開サイトなら早めに

---

# 6. 速度・可用性（静的サイトでも効く）

## 6-1. 画像が最大のボトルネック
- 画像は圧縮・リサイズ（必要なら自動化）
- 一覧に巨大画像を並べない（カードは軽く）

## 6-2. ページ肥大化を防ぐ
- 1ページに“全部”を載せない（詳細へ分割）
- 大きい表や長いログは別ページへ

---

# 7. アクセシビリティ（A11y）最低ライン
- 色だけで意味を伝えない（アイコン/ラベル併用）
- フォーカス可視（キーボード操作）
- 見出し構造が崩れていない
- 画像に代替テキスト（必要な範囲で）

---

# 8. 運用（壊さないためのルール）

## 8-1. 変更に強い規約
- URLを変えない（変えるならリダイレクト戦略）
- 画像/資産の置き場を変えない
- “規約ページ” を1つ作り、そこに集約

## 8-2. レビュー観点（PRテンプレにしてよい）
- [ ] 既存URLを壊していない
- [ ] 相対リンクが正しい
- [ ] 見出し階層が正しい
- [ ] 画像が重くない
- [ ] 一覧ページのカード情報形式が揃っている（カタログ型の場合）

## 8-3. CI（あると強い）
- buildが通ること
- リンク切れ（内部）を検出
- 可能なら Markdown lint（スタイル統一）

---

# 9. 初期テンプレ（方針だけ：コピペ用）
最初のディレクトリ案（例：辞書＋カタログ）
- `docs/index.md`（トップ：導線＋検索＋人気/更新）
- `docs/games/`（タイトル別）
- `docs/glossary/`（用語）
- `docs/howto/`（進め方/運用）
- `docs/assets/`（画像等）

---

## 依頼文の例（Codex向け）
- 「このリポジトリをMkDocsで長期運用できる構造にしたい。上の方針に従ってディレクトリ案と nav 設計、mkdocs.yml の叩きを作って」
- 「URL規約を index.md 方式に揃えたい。現状との差分と移行手順（壊さない方針）を提案して」
- 「運用チェックリストを PR テンプレに落として」
